<div>
    <div class="inline-drawer">
        <label title="Enable for this chat" for="advanced_rpg_chat_enabled" class="checkbox_label">
            <input class="checkbox" value="true" type="checkbox" id="advanced_rpg_chat_enabled">
            <span data-i18n="Enable for Chat">Enable for Chat</span>
        </label>
        <div data-i18n="Add Element" class="menu_button menu_button_icon interactable" id="advanced_rpg_add_element" tabindex="0">
            Add Element
        </div>
    </div>
</div>
<div id="entriesContainer"></div>

<!-- Hidden template for new entries -->
<fieldset id="entryTemplate" style="display: none;">
    <div class="inline-drawer">
        <textarea id="trigger_keywords" name="Keywords" data-i18n="Trigger Keywords" title="These keywords are terms that may mean this values been modified" placeholder="Trigger Keywords" class="text_pole trigger_keywords" value="heal, hurt, injured" autocomplete="off" form="form_create" rows="1"></textarea>
        <textarea id="attribute_word" name="Attribute" data-i18n="Attribute" placeholder="Attribute: HP, MP, Stamina etc." class="text_pole attribute_word" value="HP" maxlength="100" autocomplete="off" form="form_create" rows="1"></textarea>
        <textarea id="max_value" name="Max Value" data-i18n="Max Value" placeholder="What is the largest number this can be?" class="text_pole max_value" value="100" autocomplete="off" form="form_create" rows="1"></textarea>
        <label title="For User" class="checkbox_label">
            <input class="checkbox" type="checkbox">
            <span data-i18n="For User">For User</span>
        </label>
        <div class="menu_button menu_button_icon interactable removeEntry" tabindex="0">
            Remove
        </div>
    </div>
</div>

<script>
    document.getElementById('advanced_rpg_add_element').addEventListener('click', function() {
        const template = document.getElementById('entryTemplate');
        const newEntry = template.cloneNode(true);
        newEntry.style.display = ''; // Show the cloned entry

        // Add functionality to remove entry
        newEntry.querySelector('.removeEntry').addEventListener('click', function() {
            newEntry.remove();
        });
        newEntry.querySelector(".max_value").addEventListener('input', function() {
            // Get the current value
            let value = newEntry.querySelector('.max_value').value;

            // Replace any non-digit characters
            value = value.replace(/\D/g, '');

            // Update the input field with the filtered value
            newEntry.querySelector('.max_value').value = value;
        });

        document.getElementById('entriesContainer').appendChild(newEntry);
    });
</script>